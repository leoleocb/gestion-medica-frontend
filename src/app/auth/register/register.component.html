<div class="container mt-5 col-md-6">
  <div class="card shadow">
    <div class="card-body">
      <h3 class="text-center mb-4 text-success">📝 Registro de Paciente</h3>

      <form [formGroup]="form" (ngSubmit)="registrar()">
        <div class="row g-2">
          <div class="col-md-6 mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" formControlName="name">
            <div *ngIf="form.get('name')?.touched && form.get('name')?.invalid" class="text-danger small">
              ❌ El nombre es obligatorio
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" formControlName="email">
            <div *ngIf="form.get('email')?.touched && form.get('email')?.invalid" class="text-danger small">
              ❌ Ingresa un email válido
            </div>
          </div>
        </div>

        <div class="row g-2">
          <div class="col-md-6 mb-3">
            <label class="form-label">N° Identificación (DNI)</label>
            <input 
              type="text" 
              class="form-control" 
              formControlName="numeroIdentificacion" 
              maxlength="8"
              (keypress)="onlyNumbers($event)">
            
            <!-- Errores DNI -->
            <div *ngIf="form.get('numeroIdentificacion')?.touched && form.get('numeroIdentificacion')?.invalid" class="text-danger small">
              <div *ngIf="form.get('numeroIdentificacion')?.errors?.['required']">❌ El DNI es obligatorio</div>
              <div *ngIf="form.get('numeroIdentificacion')?.errors?.['minlength']">❌ El DNI debe tener 8 dígitos</div>
              <div *ngIf="form.get('numeroIdentificacion')?.errors?.['maxlength']">❌ El DNI debe tener máximo 8 dígitos</div>
            </div>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Fecha de Nacimiento</label>
            <input type="date" class="form-control" formControlName="fechaNacimiento">
            <div *ngIf="form.get('fechaNacimiento')?.touched && form.get('fechaNacimiento')?.invalid" class="text-danger small">
              ❌ La fecha de nacimiento es obligatoria
            </div>
          </div>
        </div>

        <div class="row g-2">
          <div class="col-md-6 mb-3">
            <label class="form-label">Contraseña</label>
            <input type="password" class="form-control" formControlName="password">
            <div *ngIf="form.get('password')?.touched && form.get('password')?.invalid" class="text-danger small">
              <div *ngIf="form.get('password')?.errors?.['required']">❌ La contraseña es obligatoria</div>
              <div *ngIf="form.get('password')?.errors?.['minlength']">❌ La contraseña debe tener al menos 6 caracteres</div>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Confirmar Contraseña</label>
            <input type="password" class="form-control" formControlName="confirmPassword">
            <div *ngIf="form.hasError('mismatch') && form.get('confirmPassword')?.touched" class="text-danger small">
              ❌ Las contraseñas no coinciden
            </div>
          </div>
        </div>

        <!-- 🚀 Ahora el botón no se bloquea por validaciones raras -->
        <button class="btn btn-success w-100" type="submit">Registrarse</button>
      </form>

      <div class="mt-3 text-center">
        <button class="btn btn-outline-secondary w-100" routerLink="/auth/login">
          ¿Ya tienes cuenta? 🔑 Inicia sesión aquí
        </button>
      </div>
    </div>
  </div>
</div>
